
<!DOCTYPE html><html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="hexo-theme" content="https://github.com/xaoxuu/hexo-theme-stellar/tree/1.29.1" theme-name="Stellar" theme-version="1.29.1">
  
  <meta name="generator" content="Hexo 7.3.0">
  <meta http-equiv='x-dns-prefetch-control' content='on' />
  
  <meta name="renderer" content="webkit">
  <meta name="force-rendering" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="HandheldFriendly" content="True" >
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#000">
  <meta name="theme-color" content="#f9fafb">
  
  <title>Government funding by taxation VS money creation - Mr.O's blog</title>

  
    <meta name="description" content="This is my essay for 2023 John Locke Competition. I got shortlisted and Recommended Prize. The original question is “A government funds its own expenditure by taxing its population. Suppose, instead,">
<meta property="og:type" content="article">
<meta property="og:title" content="Government funding by taxation VS money creation">
<meta property="og:url" content="http://example.com/2024/10/12/Government-funding-by-taxation-VS-money-creation/index.html">
<meta property="og:site_name" content="Mr.O&#39;s blog">
<meta property="og:description" content="This is my essay for 2023 John Locke Competition. I got shortlisted and Recommended Prize. The original question is “A government funds its own expenditure by taxing its population. Suppose, instead,">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://i0.wp.com/edexceleconomicsrevision.com/wp-content/uploads/2018/02/keynesian-lras-ad-shifts-lots-of-spare-capacity-v2.png?w=560&ssl=1">
<meta property="article:published_time" content="2024-10-11T22:55:54.000Z">
<meta property="article:modified_time" content="2024-10-11T08:07:43.204Z">
<meta property="article:author" content="Oliver Lin">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i0.wp.com/edexceleconomicsrevision.com/wp-content/uploads/2018/02/keynesian-lras-ad-shifts-lots-of-spare-capacity-v2.png?w=560&ssl=1">
  
  
  
  

  <!-- feed -->
  

  <link rel="stylesheet" href="/css/main.css?v=1.29.1">

  
    <link rel="shortcut icon" href="https://s2.loli.net/2024/08/23/clpv8iThjSNRwq6.png">
  

  

  <link rel="stylesheet" href="https://registry.npmmirror.com/lxgw-wenkai-screen-web/latest/files/style.min.css" /><link href="https://registry.npmmirror.com/lxgw-wenkai-screen-web/latest/files/style.min.css" rel="stylesheet">
</head>
<body>

<div class="l_body s:aa content tech" id="start" layout="post" ><aside class="l_left"><div class="leftbar-container">


<header class="header"><div class="logo-wrap"><a class="avatar" href="/about/"><div class="bg" style="opacity:0;background-image:url(https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/avatar/round/rainbow64@3x.webp);"></div><img no-lazy class="avatar" src="https://s2.loli.net/2024/08/23/tAwxZ39EaecYXnQ.jpg" onerror="javascript:this.classList.add('error');this.src='https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/image/2659360.svg';"></a><a class="title" href="/"><div class="main" ff="title">Mr.O's blog</div><div class="sub cap">这里是Oliver的博客</div></a></div></header>

<div class="nav-area">
<div class="search-wrapper" id="search-wrapper"><form class="search-form"><a class="search-button" onclick="document.getElementById(&quot;search-input&quot;).focus();"><svg t="1705074644177" viewBox="0 0 1025 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1560" width="200" height="200"><path d="M1008.839137 935.96571L792.364903 719.491476a56.783488 56.783488 0 0 0-80.152866 0 358.53545 358.53545 0 1 1 100.857314-335.166073 362.840335 362.840335 0 0 1-3.689902 170.145468 51.248635 51.248635 0 1 0 99.217358 26.444296 462.057693 462.057693 0 1 0-158.255785 242.303546l185.930047 185.725053a51.248635 51.248635 0 0 0 72.568068 0 51.248635 51.248635 0 0 0 0-72.978056z" p-id="1561"></path><path d="M616.479587 615.969233a50.428657 50.428657 0 0 0-61.498362-5.534852 174.655348 174.655348 0 0 1-177.525271 3.484907 49.403684 49.403684 0 0 0-58.833433 6.76482l-3.074918 2.869923a49.403684 49.403684 0 0 0 8.609771 78.10292 277.767601 277.767601 0 0 0 286.992355-5.739847 49.403684 49.403684 0 0 0 8.404776-76.667958z" p-id="1562"></path></svg></a><input type="text" class="search-input" id="search-input" placeholder="Search"></form><div id="search-result"></div><div class="search-no-result">No Results!</div></div>


<nav class="menu dis-select"></nav>
</div>
<div class="widgets">


<widget class="widget-wrapper post-list"><div class="widget-header dis-select"><span class="name">Recent Update</span></div><div class="widget-body fs14"><a class="item title" href="/2024/10/12/Government-funding-by-taxation-VS-money-creation/"><span class="title">Government funding by taxation VS money creation</span></a><a class="item title" href="/2024/08/24/the-surge-of-populism-and-the-polarization-of-the-society/"><span class="title">the surge of populism and the polarization of the society</span></a><a class="item title" href="/2024/08/23/hello-world/"><span class="title">Hello World</span></a></div></widget>
</div>

</div></aside><div class="l_main" id="main">





<div class="article banner top">
  <div class="content">
    <div class="top bread-nav footnote"><div class="left"><div class="flex-row" id="breadcrumb"><a class="cap breadcrumb" href="/">Home</a>
<span class="sep"></span><a class="cap breadcrumb" href="/">Blog</a></div>
<div class="flex-row" id="post-meta"><span class="text created">Posted on: <time datetime="2024-10-11T22:55:54.000Z">2024-10-11</time></span><span class="sep updated"></span><span class="text updated">Updated on: <time datetime="2024-10-11T08:07:43.204Z">2024-10-11</time></span></div></div></div>
    
    <div class="bottom only-title">
      
      <div class="text-area">
        <h1 class="text title"><span>Government funding by taxation VS money creation</span></h1>
        
      </div>
    </div>
    
  </div>
  </div><article class="md-text content"><p><em><strong>This is my essay for 2023 John Locke Competition. I got shortlisted and Recommended Prize. The original question is “A government funds its own expenditure by taxing its population. Suppose, instead, it relied solely on money newly created by the central bank? What would be the advantages and&#x2F;or disadvantages?”</strong></em></p>
<p>A government needs a source of income to support its expenditure. There are different approaches to generating revenue, which was the source of political rivalry in the Swedish Parliament in the 1700s. From 1739 to 1772, there was a huge conflict of visions between two political parties known as the Hats and the Caps in the Swedish Riksdag. The Hats advocated financing expenditures with money creation, and the Caps argued that the government funds its expenditure by borrowing and taxation. The two parties’ policies are both imperfect.<br>In 1741, the Hats tried to regain the land lost in the Great Northern War. During this period, the government announced the inconvertibility of bank notes indefinitely because of the substantial money creation. The Hats used a series of policies that included direct subsidies to manufacturers, export subsidies, and the construction of roads and canals to increase economic activity. (Hendrickson,2021) Additionally, the Riksbank offered loans directly to firms and the government. In other words, the hats used financial and monetary policies to stimulate the economy. Besides that, government spending was effectively paid for with new money creation. Unfortunately, the price level went up; the Hats were replaced by the Caps, which carried out a series of policies to contract the money supplies. Interestingly, the Hats’ approach is the same as solely relying on new money created. In this essay, I will address the advantages and disadvantages of this method of funding government expenditure.<br>Beginning with the background of central bank money creation, an independent central bank carries out the monetary policies in modern society. For example, in the United States, the Federal Reserve is the central bank, and one of its main functions is to create money. The central bank creates money by printing money and creating reserves.<br>Firstly, the central bank prints new paper notes and coins (physical money) to increase money creation. According to the Bank of England, banknotes and coins only make up 3% of money creation. (Bank of England, 2023) It is not the main source of money now. It has been replaced by creating digital reserves with the development of technology. But this does not reduce the power of the central bank; in contrast, it boosts the power of the central bank to stabilise the economy.<br>Secondly, when it comes to creating reserves, the central bank can do either one of two things: open market operation or quantitative easing. The two methods which create the main source of money today - digital money. Open market operation means the central bank purchases short-term securities from commercial banks, individuals, and institutions in the open market. In this way, the demand for securities is stimulated, increasing the price and decreasing the yield. So, the commercial bank has more reserves to support them to lend to businesses, and the interest rate falls. On the other hand, quantitative easing (QE) entails the central bank purchasing longer-term bonds and mortgages to push their prices up and bring down long-term interest rates. It was first introduced in 2001 by the Bank of Japan and populated in the Global Financial Crisis. (Bank of England, 2023) It helps the commercial bank have more liquidity and will not face the interest trap. Mostly, the money the central bank creates is used to support monetary policies. So, they can achieve various macroeconomic objectives, such as attaining full employment, achieving a balance of payments, and pursuing stable and sustainable economic growth. But money creation is only one of the sources of government funding. (McLeay and Radia, 2014)<br>Before analysing the advantages of relying solely on central bank money creation, one must examine the Modern Monetary Policy(MMT). MMT is based on Chartalism, which argues that the value of a currency is derived from its status as legal tender. (Wray, 2014) Furthermore, the money the government borrows from the central bank is fiat money, the unit of account. The government and its central bank must only type the credits and debits. It means the borrowed money is not the real deficit, while the loan, based on the money token like banknotes or coins, is the real deficit. So there is no risk for the government to go bankrupt; it is impossible. The government can use the money created by the central bank to increase spending. This can provide better flexibility for the government to respond. They can increase the money supply in recession or decrease expansion to decrease the amplitude(vertical distance between peak and trough) - stabilise the economy.<br>As we mentioned before, money creation relies on reserve creation now. With more reserves, commercial banks can lend out more money. Also, the banks are willing to lead out more to maximise their profits. So in the loan market, the supply increases while the demand is fixed, and the price(interest rate) decreases. Households can bear the burden of a mortgage to purchase a house or a car at lower interest rates. So they bear less risk and keep their living standards to the maximum extent. Companies can borrow at lower interest rates. So they have better liquidity to flow capital. For the economy, private investment and consumption will be encouraged, which can help the economy get rid of the recession more efficiently.<br>When we remove taxation, the economy will change significantly. It is bold to imagine an economy with a surcharge removed since dramatic changes will follow. Without direct taxes such as income tax, people can earn more disposable income, which improves their purchasing power. This expands aggregate demand.  On the other hand, without indirect taxes such as VAT, the production cost reduces, boosting supply. The total output can increase at a higher rate through the interaction of expanded demand and increased supply. Besides that, higher disposable income leads to better quality of living. Therefore, workers have more incentive to work harder and have more sense of gain. For the economy, better work productivity makes the resource used more efficiently, which means actual economic growth. Also, a better living quality will free up more time for thinking and researching, which could improve the global landscape for technology and unleash waves of technological breakthroughs. The upper limit of output will increase, and the economy will gain potential growth.<br>Inflation will become a key concern in this hypothetical scenario that the question invites us to consider. Fisher’s “exchange equation of money” provides a tool for us to study the quantity theory of money(Persons, 1911):<br>PY&#x3D;MV(M &#x3D; money supply, V &#x3D; velocity of money, P &#x3D; price level, Y &#x3D; real GDP).<br>When we assume that V and Y are both constant, P and M are positively correlated: when the money supply increases, the price level goes up. So the inflation rate increases with money creation. Someone will say the central bank sets the target inflation rate at 2%(Bank of England, 2023), so it is better to fix the inflation rate at 2%. While the new money creation will lead to a higher inflation rate, the government should refrain from using it to support its expenditure. However, this is not a problem according to the Keynesian school’s Long Run Aggregate Supply (LRAS curve), as when the price level increases, there will always be a new equilibrium that shows higher real GDP until full employment. There are many types of unemployment, and attaining full employment is almost impossible. And the negative economic consequences–workers who earn low and fixed incomes will lose their purchasing power with higher living costs–can be solved by the stronger power of unions. Overall, inflation is not a problem in money creation. Instead, it makes higher real GDP in most situations.</p>
<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://i0.wp.com/edexceleconomicsrevision.com/wp-content/uploads/2018/02/keynesian-lras-ad-shifts-lots-of-spare-capacity-v2.png?w=560&ssl=1" alt="LRAS"></p>
<p>Although the strategy helps the economy, the government spending relying solely on central bank creation does bring practical problems. The first problem is about the government’s credibility. The South Asian country Sri Lanka has abolished several taxes such as Pay As You Earn Tax (PAYE), Nation Building Tax (NBT), Withholding Tax on Interests, Debit Tax, Capital Gains Tax, and Debt Services Tax in 2019. (Sardar, 2022) It has made the deficit doubled between 2019 and 2020. So the government keeps increasing its money creation to cover the expenditures. But this operation was opposed by the International Monetary Fund(IMF) and rating agencies downgrading the sovereign credit rating. (George,2022) It hurts the economy more. People are worried about the pay-back ability of the Sri Lanka government, so they lend less money which hurts the liquidity of the government. Because of Russia’s invasion of Ukraine, the rising oil price gave the last hurt to this country–the country went bankrupt. This may decrease the risk-bearing ability and the credibility of the government.<br>The second problem is about equity. One of the important functions of taxation is redistribution. The progressive income tax asks the rich to pay a higher tax rate and the poor to pay a lower one. In England, the people who earn taxable income over £125,140 annually should bear 45% tax rates, while those who earn taxable income under £12,570 annually do not need to pay taxes. (GOV.UK, 2023) So the gap between the disposable income of the poor and the rich is narrowed. If the government stops taxing its citizens, there will be no progressive income tax to promote equity. Although the inflation caused by new money creation will hurt the rich more than the poor because of more wealth, it cannot be efficient–in common, the rich will separate their income, like gold, stocks, and assets. It helps the rich keep their wealth and almost ignores inflation. At the same time, people with low incomes do not have so many ways to do this. So the new money creation without tax will widen the existing large inequality of wealth.<br>Let us go back to the real world. In 2023 under the impacts of the pandemic and Russia’s invasion of Ukraine, the economies worldwide have deteriorated. But the real GDP in Japan grew 2.7% in the first quarter of the year, faster than the earlier prediction of 1.6%. In other words, Japan has succeeded in recovering its economy. (Government of Japan,2023) The growth is relevant to QE-new money creation. Although Japan did not cut all the taxes and the expenditure did not rely on new money creation, the example showed the power of relying solely on money creation to push economic growth.<br>Suppose the government tries to become a more extreme version of “Japan” by funding its expenditures solely relying on new money creation. In that case, the economy will be more stable and have stronger pressure to push economic growth. At the same time, the government’s credibility and equity will be hurt. But compared with the advantages we mentioned, the disadvantages do not have so much power to impede economic development. The government can repay the bonds on time to build a good credit record. So the rating agencies will trust the government. Also, the government can use its budget to create completed social welfare and transfer payments. An effective and efficient government can solve these disadvantages. So the advantages outweigh the disadvantages. Therefore, funding the government solely on the newly created money might be a good attempt when we want to stimulate the economy. Still, considering the disadvantages, it is best to be tried in good-credit countries and efficient government.</p>
<p><strong>REFERENCES</strong></p>
<p>Joshua Hendrickson, ‘What Happens When Governments Pay for Spending with Money Creation? Lessons from the Early Riksbank’, 2021 <a target="_blank" rel="noopener" href="https://www.mercatus.org/research/policy-briefs/what-happens-when-governments-pay-spending-money-creation-lessons-early">https://www.mercatus.org/research/policy-briefs/what-happens-when-governments-pay-spending-money-creation-lessons-early</a> [accessed 20 May 2023].</p>
<p>Bank of England, ‘How Is Money Created?’, 2023 <a target="_blank" rel="noopener" href="https://www.bankofengland.co.uk/explainers/how-is-money-created">https://www.bankofengland.co.uk/explainers/how-is-money-created</a> [accessed 1 June 2023].</p>
<p>Bank of England, ‘Quantitative Easing’ <a target="_blank" rel="noopener" href="https://www.bankofengland.co.uk/monetary-policy/quantitative-easing">https://www.bankofengland.co.uk/monetary-policy/quantitative-easing</a> [accessed 1 June 2023].</p>
<p>Michael McLeay and Amar Radia, ‘Money Creation in the Modern Economy’, 2014.</p>
<p>L. Randall Wray, ‘From the State Theory of Money to Modern Money Theory: An Alternative to Economic Orthodoxy’, <em>SSRN Electronic Journal</em>, 2014 .</p>
<p>Thomas I. Palley, ‘Money, Fiscal Policy, and Interest Rates: A Critique of Modern Monetary Theory’, <em>Review of Political Economy</em>, 27.1 (2015), 1–23 <a target="_blank" rel="noopener" href="https://doi.org/10.1080/09538259.2014.957466">https://doi.org/10.1080/09538259.2014.957466</a>.</p>
<p>Warren M. Persons, ‘Fisher’s “The Purchasing Power of Money”’, ed. by Irving Fisher, <em>Publications of the American Statistical Association</em>, 12.96 (1911), 818–29 <a target="_blank" rel="noopener" href="https://doi.org/10.2307/2965060">https://doi.org/10.2307/2965060</a>.</p>
<p>Bank of England, ‘Inflation and the 2% Target’ <a target="_blank" rel="noopener" href="https://www.bankofengland.co.uk/monetary-policy/inflation">https://www.bankofengland.co.uk/monetary-policy/inflation</a> [accessed 21 June 2023].</p>
<p>Syed Imran Sardar, ‘How Did Sri Lanka Go Bankrupt? A Retrospective Analysis’, 2022.</p>
<p>A.S. Hovan George, A. Shaji George, and T. Baskar, ‘Sri Lanka’s Economic Crisis: A Brief Overview’, 2022 <a target="_blank" rel="noopener" href="https://doi.org/10.5281/ZENODO.6726553">https://doi.org/10.5281/ZENODO.6726553</a>.</p>
<p>GOV.UK, ‘Income Tax Rates and Personal Allowances : Current Rates and Allowances’ <a target="_blank" rel="noopener" href="https://www.gov.uk/income-tax-rates">https://www.gov.uk/income-tax-rates</a>.</p>
<p>Government of Japan, ‘Quarterly Estimates of GDP for January - March 2023 (Second Preliminary Estimates)’, 2023.</p>

<div class="article-footer fs14">
    <section id="license">
      <div class="header"><span>License</span></div>
      <div class="body"><p>本文采用 <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">署名-非商业性使用-相同方式共享 4.0 国际</a> 许可协议，转载请注明出处。</p>
</div>
    </section>
    </div>
</article>
<div class="related-wrap" id="read-next"><section class="body"><div class="item" id="prev"></div><div class="item" id="next"><div class="note">Older</div><a href="/2024/08/24/the-surge-of-populism-and-the-polarization-of-the-society/">the surge of populism and the polarization of the society</a></div></section></div>






<footer class="page-footer footnote"><hr><div class="text"><p>本站由 <a href="/">Oliver Lin</a> 使用 <a target="_blank" rel="noopener" href="https://github.com/xaoxuu/hexo-theme-stellar/tree/1.29.1">Stellar 1.29.1</a> 主题创建。<br>本博客所有文章除特别声明外，均采用 <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议，转载请注明出处。</p>
</div></footer>
<div class="main-mask" onclick="sidebar.dismiss()"></div></div><aside class="l_right">
</aside><div class='float-panel blur'>
  <button type='button' style='display:none' class='laptop-only rightbar-toggle mobile' onclick='sidebar.rightbar()'>
    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6h11m-11 6h11m-11 6h11M4 6h1v4m-1 0h2m0 8H4c0-1 2-2 2-3s-1-1.5-2-1"/></svg>
  </button>
  <button type='button' style='display:none' class='mobile-only leftbar-toggle mobile' onclick='sidebar.leftbar()'>
    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-width="1.5"><path d="M2 11c0-3.771 0-5.657 1.172-6.828C4.343 3 6.229 3 10 3h4c3.771 0 5.657 0 6.828 1.172C22 5.343 22 7.229 22 11v2c0 3.771 0 5.657-1.172 6.828C19.657 21 17.771 21 14 21h-4c-3.771 0-5.657 0-6.828-1.172C2 18.657 2 16.771 2 13z"/><path id="sep" stroke-linecap="round" d="M5.5 10h6m-5 4h4m4.5 7V3"/></g></svg>
  </button>
</div>
</div><div class="scripts">
<script type="text/javascript">
  const ctx = {
    date_suffix: {
      just: `Just`,
      min: `minutes ago`,
      hour: `hours ago`,
      day: `days ago`,
    },
    root : `/`,
  };

  // required plugins (only load if needs)
  if (`local_search`) {
    ctx.search = {};
    ctx.search.service = `local_search`;
    if (ctx.search.service == 'local_search') {
      let service_obj = Object.assign({}, `{"field":"all","path":"/search.json","content":true,"sort":"-date"}`);
      ctx.search[ctx.search.service] = service_obj;
    }
  }
  const def = {
    avatar: `https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/avatar/round/3442075.svg`,
    cover: `https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/cover/76b86c0226ffd.svg`,
  };
  const deps = {
    jquery: `https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js`,
    marked: `https://cdn.jsdelivr.net/npm/marked@13.0.1/lib/marked.umd.min.js`
  }
  

</script>

<script type="text/javascript">
  const utils = {
    // 懒加载 css https://github.com/filamentgroup/loadCSS
    css: (href, before, media, attributes) => {
      var doc = window.document;
      var ss = doc.createElement("link");
      var ref;
      if (before) {
        ref = before;
      } else {
        var refs = (doc.body || doc.getElementsByTagName("head")[0]).childNodes;
        ref = refs[refs.length - 1];
      }
      var sheets = doc.styleSheets;
      if (attributes) {
        for (var attributeName in attributes) {
          if (attributes.hasOwnProperty(attributeName)) {
            ss.setAttribute(attributeName, attributes[attributeName]);
          }
        }
      }
      ss.rel = "stylesheet";
      ss.href = href;
      ss.media = "only x";
      function ready(cb) {
        if (doc.body) {
          return cb();
        }
        setTimeout(function () {
          ready(cb);
        });
      }
      ready(function () {
        ref.parentNode.insertBefore(ss, before ? ref : ref.nextSibling);
      });
      var onloadcssdefined = function (cb) {
        var resolvedHref = ss.href;
        var i = sheets.length;
        while (i--) {
          if (sheets[i].href === resolvedHref) {
            return cb();
          }
        }
        setTimeout(function () {
          onloadcssdefined(cb);
        });
      };
      function loadCB() {
        if (ss.addEventListener) {
          ss.removeEventListener("load", loadCB);
        }
        ss.media = media || "all";
      }
      if (ss.addEventListener) {
        ss.addEventListener("load", loadCB);
      }
      ss.onloadcssdefined = onloadcssdefined;
      onloadcssdefined(loadCB);
      return ss;
    },

    js: (src, opt) => new Promise((resolve, reject) => {
      var script = document.createElement('script');
      if (src.startsWith('/')){
        src = ctx.root + src.substring(1);
      }
      script.src = src;
      if (opt) {
        for (let key of Object.keys(opt)) {
          script[key] = opt[key]
        }
      } else {
        // 默认异步，如果需要同步，第二个参数传入 {} 即可
        script.async = true
      }
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    }),

    jq: (fn) => {
      if (typeof jQuery === 'undefined') {
        utils.js(deps.jquery).then(fn)
      } else {
        fn()
      }
    },
    
    onLoading: (el) => {
      if (el) {
        $(el).append('<div class="loading-wrap"><svg xmlns="http://www.w3.org/2000/svg" width="2em" height="2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-width="2"><path stroke-dasharray="60" stroke-dashoffset="60" stroke-opacity=".3" d="M12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3Z"><animate fill="freeze" attributeName="stroke-dashoffset" dur="1.3s" values="60;0"/></path><path stroke-dasharray="15" stroke-dashoffset="15" d="M12 3C16.9706 3 21 7.02944 21 12"><animate fill="freeze" attributeName="stroke-dashoffset" dur="0.3s" values="15;0"/><animateTransform attributeName="transform" dur="1.5s" repeatCount="indefinite" type="rotate" values="0 12 12;360 12 12"/></path></g></svg></div>');
      }
    },
    onLoadSuccess: (el) => {
      if (el) {
        $(el).find('.loading-wrap').remove();
      }
    },
    onLoadFailure: (el) => {
      if (el) {
        $(el).find('.loading-wrap svg').remove();
        $(el).find('.loading-wrap').append('<svg xmlns="http://www.w3.org/2000/svg" width="2em" height="2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path stroke-dasharray="60" stroke-dashoffset="60" d="M12 3L21 20H3L12 3Z"><animate fill="freeze" attributeName="stroke-dashoffset" dur="0.5s" values="60;0"/></path><path stroke-dasharray="6" stroke-dashoffset="6" d="M12 10V14"><animate fill="freeze" attributeName="stroke-dashoffset" begin="0.6s" dur="0.2s" values="6;0"/></path></g><circle cx="12" cy="17" r="1" fill="currentColor" fill-opacity="0"><animate fill="freeze" attributeName="fill-opacity" begin="0.8s" dur="0.4s" values="0;1"/></circle></svg>');
        $(el).find('.loading-wrap').addClass('error');
      }
    },
    request: (el, url, callback, onFailure) => {
      let retryTimes = 3;
      utils.onLoading(el);
      function req() {
        return new Promise((resolve, reject) => {
          let status = 0; // 0 等待 1 完成 2 超时
          let timer = setTimeout(() => {
            if (status === 0) {
              status = 2;
              timer = null;
              reject('请求超时');
              if (retryTimes == 0) {
                onFailure();
              }
            }
          }, 5000);
          fetch(url).then(function(response) {
            if (status !== 2) {
              clearTimeout(timer);
              resolve(response);
              timer = null;
              status = 1;
            }
            if (response.ok) {
              return response.json();
            }
            throw new Error('Network response was not ok.');
          }).then(function(data) {
            retryTimes = 0;
            utils.onLoadSuccess(el);
            callback(data);
          }).catch(function(error) {
            if (retryTimes > 0) {
              retryTimes -= 1;
              setTimeout(() => {
                req();
              }, 5000);
            } else {
              utils.onLoadFailure(el);
              onFailure();
            }
          });
        });
      }
      req();
    },
  };
</script>

<script>
  const sidebar = {
    leftbar: () => {
      if (l_body) {
        l_body.toggleAttribute('leftbar');
        l_body.removeAttribute('rightbar');
      }
    },
    rightbar: () => {
      if (l_body) {
        l_body.toggleAttribute('rightbar');
        l_body.removeAttribute('leftbar');
      }
    },
    dismiss: () => {
      if (l_body) {
        l_body.removeAttribute('leftbar');
        l_body.removeAttribute('rightbar');
      }
    },
    toggleTOC: () => {
      document.querySelector('#data-toc').classList.toggle('collapse');
    }
  }
</script>
<script type="text/javascript">
  (() => {
    const tagSwitchers = document.querySelectorAll('.tag-subtree.parent-tag > a > .tag-switcher-wrapper')
    for (const tagSwitcher of tagSwitchers) {
      tagSwitcher.addEventListener('click', (e) => {
        const parent = e.target.closest('.tag-subtree.parent-tag')
        parent.classList.toggle('expanded')
        e.preventDefault()
      })
    }

    // Get active tag from query string, then activate it.
    const urlParams = new URLSearchParams(window.location.search)
    const activeTag = urlParams.get('tag')
    if (activeTag) {
      let tag = document.querySelector(`.tag-subtree[data-tag="${activeTag}"]`)
      if (tag) {
        tag.querySelector('a').classList.add('active')
        
        while (tag) {
          tag.classList.add('expanded')
          tag = tag.parentElement.closest('.tag-subtree.parent-tag')
        }
      }
    }
  })()
</script>


<!-- required -->
<script src="/js/main.js?v=1.29.1" defer></script>

<script type="text/javascript">
  const applyTheme = (theme) => {
    if (theme === 'auto') {
      document.documentElement.removeAttribute('data-theme')
    } else {
      document.documentElement.setAttribute('data-theme', theme)
    }

    applyThemeToGiscus(theme)
  }

  const applyThemeToGiscus = (theme) => {
    theme = theme === 'auto' ? 'preferred_color_scheme' : theme

    const cmt = document.getElementById('giscus')
    if (cmt) {
      // This works before giscus load.
      cmt.setAttribute('data-theme', theme)
    }

    const iframe = document.querySelector('#comments > section.giscus > iframe')
    if (iframe) {
      // This works after giscus loaded.
      const src = iframe.src
      const newSrc = src.replace(/theme=[\w]+/, `theme=${theme}`)
      iframe.src = newSrc
    }
  }

  const switchTheme = () => {
    // light -> dark -> auto -> light -> ...
    const currentTheme = document.documentElement.getAttribute('data-theme')
    let newTheme;
    switch (currentTheme) {
      case 'light':
        newTheme = 'dark'
        break
      case 'dark':
        newTheme = 'auto'
        break
      default:
        newTheme = 'light'
    }
    applyTheme(newTheme)
    window.localStorage.setItem('Stellar.theme', newTheme)

    const messages = {
      light: `Switched to Light Mode`,
      dark: `Switched to Dark Mode`,
      auto: `Switched to Auto Mode`,
    }
    hud?.toast?.(messages[newTheme])
  }

  (() => {
    // Apply user's preferred theme, if any.
    const theme = window.localStorage.getItem('Stellar.theme')
    if (theme !== null) {
      applyTheme(theme)
    }
  })()
</script>


<!-- optional -->



<script defer>
  window.addEventListener('DOMContentLoaded', (event) => {
    ctx.services = Object.assign({}, JSON.parse(`{"mdrender":{"js":"/js/services/mdrender.js"},"siteinfo":{"js":"/js/services/siteinfo.js","api":null},"ghinfo":{"js":"/js/services/ghinfo.js"},"sites":{"js":"/js/services/sites.js"},"friends":{"js":"/js/services/friends.js"},"timeline":{"js":"/js/services/timeline.js"},"fcircle":{"js":"/js/services/fcircle.js"},"weibo":{"js":"/js/services/weibo.js"},"memos":{"js":"/js/services/memos.js"}}`));
    for (let id of Object.keys(ctx.services)) {
      const js = ctx.services[id].js;
      if (id == 'siteinfo') {
        ctx.cardlinks = document.querySelectorAll('a.link-card[cardlink]');
        if (ctx.cardlinks?.length > 0) {
          utils.js(js, { defer: true }).then(function () {
            setCardLink(ctx.cardlinks);
          });
        }
      } else {
        const els = document.getElementsByClassName(`ds-${id}`);
        if (els?.length > 0) {
          utils.jq(() => {
            if (id == 'timeline' || 'memos' || 'marked') {
              utils.js(deps.marked).then(function () {
                utils.js(js, { defer: true });
              });
            } else {
              utils.js(js, { defer: true });
            }
          });
        }
      }
    }
  });
</script>

<script>
  window.addEventListener('DOMContentLoaded', (event) => {
    ctx.search = {
      path: `/search.json`,
    }
    utils.js('/js/search/local-search.js', { defer: true });
  });
</script><script>
  window.FPConfig = {
    delay: 0,
    ignoreKeywords: [],
    maxRPS: 5,
    hoverDelay: 25
  };
</script>
<script defer src="https://cdn.jsdelivr.net/npm/flying-pages@2/flying-pages.min.js"></script><script defer src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@19.1.3/dist/lazyload.min.js"></script>
<script>
  // https://www.npmjs.com/package/vanilla-lazyload
  // Set the options globally
  // to make LazyLoad self-initialize
  window.lazyLoadOptions = {
    elements_selector: ".lazy",
  };
  // Listen to the initialization event
  // and get the instance of LazyLoad
  window.addEventListener(
    "LazyLoad::Initialized",
    function (event) {
      window.lazyLoadInstance = event.detail.instance;
    },
    false
  );
  document.addEventListener('DOMContentLoaded', function () {
    window.lazyLoadInstance?.update();
  });
</script><script>
  ctx.fancybox = {
    selector: `.timenode p>img`,
    css: `https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0/dist/fancybox/fancybox.css`,
    js: `https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0/dist/fancybox/fancybox.umd.js`
  };
  var selector = '[data-fancybox]:not(.error)';
  if (ctx.fancybox.selector) {
    selector += `, ${ctx.fancybox.selector}`
  }
  var needFancybox = document.querySelectorAll(selector).length !== 0;
  if (!needFancybox) {
    const els = document.getElementsByClassName('ds-memos');
    if (els != undefined && els.length > 0) {
      needFancybox = true;
    }
  }
  if (needFancybox) {
    utils.css(ctx.fancybox.css);
    utils.js(ctx.fancybox.js, { defer: true }).then(function () {
      Fancybox.bind(selector, {
        hideScrollbar: false,
        Thumbs: {
          autoStart: false,
        },
        caption: (fancybox, slide) => {
          return slide.triggerEl.alt || slide.triggerEl.dataset.caption || null
        }
      });
    })
  }
</script>
<script>
  window.addEventListener('DOMContentLoaded', (event) => {
    const swiper_api = document.getElementById('swiper-api');
    if (swiper_api != undefined) {
      utils.css(`https://unpkg.com/swiper@10.3.1/swiper-bundle.min.css`);
      utils.js(`https://unpkg.com/swiper@10.3.1/swiper-bundle.min.js`, { defer: true }).then(function () {
        const effect = swiper_api.getAttribute('effect') || '';
        var swiper = new Swiper('.swiper#swiper-api', {
          slidesPerView: 'auto',
          spaceBetween: 8,
          centeredSlides: true,
          effect: effect,
          rewind: true,
          pagination: {
            el: '.swiper-pagination',
            clickable: true,
          },
          navigation: {
            nextEl: '.swiper-button-next',
            prevEl: '.swiper-button-prev',
          },
        });
      })
    }
  });
</script>
<script>
  document.addEventListener('DOMContentLoaded', function () {
    window.codeElements = document.querySelectorAll('.code');
    if (window.codeElements.length > 0) {
      ctx.copycode = {
        default_text: `Copy`,
        success_text: `Copied`,
        toast: `复制成功`,
      };
      utils.js('/js/plugins/copycode.js');
    }
  });
</script>


<!-- inject -->

</div></body></html>
